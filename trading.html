<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Opera spot, perps y RFQ en BitForward con precios en vivo, libro de órdenes simulado y gestión de posiciones en una sola vista."
    />
    <meta property="og:title" content="Trading | BitForward" />
    <meta
      property="og:description"
      content="Panel de trading con precios en vivo, órdenes long/short y posiciones abiertas."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://asesoraft.github.io/BitForward/trading.html" />
    <title>Exchange | BitForward</title>

    <!-- Estilos del Sistema de Diseño y Universales -->
    <link rel="stylesheet" href="css/design-system.css" />
    <!-- Estilos de la Interfaz de Exchange -->
    <link rel="stylesheet" href="css/exchange.css" />

    <link rel="icon" href="assets/favicon.ico" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <bf-header logo-src="assets/logo-astronaut-rocket.svg" hide-logo></bf-header>
    <bf-sidebar></bf-sidebar>

    <!-- Contenedor Principal del Exchange -->
    <div class="exchange-container" style="margin-left: 240px; min-height: 100vh">
      <!-- Barra superior con CTA de wallet -->
      <div class="exchange-module flex justify-between items-center mb-3" aria-live="polite">
        <div class="flex flex-col gap-1">
          <p class="eyebrow">BitForward Trading</p>
          <div class="live-strip" id="live-strip" role="status" aria-live="polite">
            <!-- Llenado por JS: BTC/USDT, ETH/USDT, SOL/USDT -->
          </div>
          <small id="price-source" class="text-gray-400 text-xs" aria-live="polite"
            >vía /api/prices · --</small
          >
        </div>
        <div class="wallet-cta">
          <div class="wallet-status" id="wallet-status">Wallet desconectada</div>
          <div class="wallet-network" id="wallet-network">Red: --</div>
          <button class="btn btn-primary gradient" id="btn-connect-wallet">Conectar wallet</button>
        </div>
      </div>

      <!-- 1. Header del Mercado -->
      <header class="exchange-module exchange-header">
        <div class="market-info-bar">
          <div class="market-selector">
            <img
              src="https://cryptologos.cc/logos/bitcoin-btc-logo.svg?v=029"
              alt="BTC"
              class="pair-icon"
            />
            <span class="pair-name">BTC/USDT</span>
          </div>
          <div class="market-stat" aria-live="polite">
            <span class="label">Precio</span>
            <span class="value market-price" id="current-price">$0.00</span>
          </div>
          <div class="market-stat" aria-live="polite">
            <span class="label">Cambio 24h</span>
            <span class="value positive" id="price-change">+0.00 (0.00%)</span>
          </div>
          <div class="market-stat">
            <span class="label">Volumen 24h</span>
            <span class="value" id="volume-24h">0 BTC</span>
          </div>
          <div class="market-stat">
            <span class="label">Profundidad</span>
            <select
              id="depth-select"
              class="depth-select"
              aria-label="Profundidad del libro de órdenes"
            >
              <option value="5">5</option>
              <option value="10" selected>10</option>
              <option value="25">25</option>
            </select>
          </div>
        </div>
      </header>

      <!-- 2. Formularios y Libro de Órdenes -->
      <aside class="exchange-module exchange-orders">
        <div class="order-tabs">
          <button class="order-tab active" id="tab-long">Long</button>
          <button class="order-tab" id="tab-short">Short</button>
        </div>
        <div class="order-form-container">
          <div class="input-group">
            <label for="price">Precio (USDT)</label>
            <input type="number" id="price" placeholder="Precio de mercado" />
          </div>
          <div class="input-group">
            <label for="amount">Cantidad (BTC)</label>
            <input type="number" id="amount" placeholder="0.00" />
          </div>
          <div class="input-group">
            <label for="size-usd">Tamaño (USDT)</label>
            <input type="number" id="size-usd" placeholder="0.00" />
          </div>
          <div class="input-group">
            <label for="tp">Take Profit (USDT)</label>
            <input type="number" id="tp" placeholder="Opcional" />
          </div>
          <div class="input-group">
            <label for="sl">Stop Loss (USDT)</label>
            <input type="number" id="sl" placeholder="Opcional" />
          </div>
          <div class="input-group">
            <label for="leverage">Apalancamiento</label>
            <input type="range" id="leverage" min="1" max="20" value="5" />
            <small id="lev-display">5x</small>
          </div>
          <div class="order-summary">
            <div>Margen requerido: <span id="margin-needed">$0.00</span></div>
            <div>Fee estimada: <span id="fee-estimate">$0.00</span></div>
          </div>
          <div class="btn-group">
            <button class="btn btn-long" id="btn-buy">Long</button>
            <button class="btn btn-short" id="btn-sell">Short</button>
          </div>
        </div>
        <div class="exchange-module-header">Libro de Órdenes</div>
        <div class="data-table-container">
          <div class="data-table-header">
            <span>Precio (USD)</span>
            <span>Cantidad (BTC)</span>
            <span>Total (USD)</span>
          </div>
          <div id="order-book-asks"></div>
          <div class="order-book-spread">
            <span id="spread-value">$67,500.50</span>
          </div>
          <div id="order-book-bids"></div>
        </div>
      </aside>

      <!-- 3. Gráfico Principal -->
      <main class="exchange-module exchange-chart">
        <div id="chart-container"></div>
      </main>

      <!-- 4. Historial de Trades -->
      <aside class="exchange-module exchange-trade-history">
        <div class="exchange-module-header">Historial de Mercado</div>
        <div class="data-table-container">
          <div class="data-table-header">
            <span>Precio (USD)</span>
            <span>Cantidad (BTC)</span>
            <span>Hora</span>
          </div>
          <div id="trade-history-list"></div>
        </div>
      </aside>

      <!-- 5. Posiciones del Usuario -->
      <footer class="exchange-module exchange-user-positions">
        <div class="exchange-module-header">Posiciones Abiertas</div>
        <div class="user-positions-container">
          <table class="user-positions-table">
            <thead>
              <tr>
                <th>Par</th>
                <th>Tipo</th>
                <th>Cantidad</th>
                <th>Precio Entrada</th>
                <th>P/L no realizado</th>
                <th>HF / Riesgo</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody>
              <!-- Ejemplo de posición -->
              <tr>
                <td>BTC/USD</td>
                <td class="positive">COMPRA</td>
                <td>0.5</td>
                <td>$65,120.00</td>
                <td class="positive">+$1,190.25</td>
                <td>HF 75</td>
                <td><button class="btn btn-ghost btn-sm">Close</button></td>
              </tr>
            </tbody>
          </table>
        </div>
      </footer>
    </div>

    <bf-footer></bf-footer>

    <!-- Scripts -->
    <script type="module" src="js/components/bf-header.js"></script>
    <script type="module" src="js/components/bf-sidebar.js"></script>
    <script type="module" src="js/components/bf-footer.js"></script>
    <script type="module" src="js/exchange-live.js"></script>
  </body>
</html>
